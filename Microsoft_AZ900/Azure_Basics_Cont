Azure services

Compute and Networking Services

Virtual Machines
Azure RemoteApp
Azure Cloud Services
Azure Virtual Networks
Azure ExpressRoute
Traffic Manager

Storage and Backup Services

Azure Storage
Azure Import/Export Service
Azure Backup
Azure Site Recovery

Identity and Access Management Services

Azure Active Directory
Azure Multi-Factor Authentication

Application Services

Azure App Services
API Management
Notification Hubs
Event Hubs

Data and Analytics Services

SQL Database
HDInsightÂ®
Azure Redis Cache
Azure Machine Learning
DocumentDB
Azure Search

Media and Content Delivery Services

Azure Media Services
Azure CDN
Azure Service Bus

Azure Marketplace - an online applications and services marketplace that offers,

VM images and extensions
APIs and Applications
Machine Learning and Data services
VM Depot - a community-based catalog of open source virtual machine images that can be deployed directly from Azure.

GitHub - a web-based Git repository that is free to use for public and open source projects.

Azure Trust Center - offers guidelines for integrated security monitoring and policy management across Azure subscriptions. Also, it provides data security & data privacy guidelines essential to comply with regulatory controls.

Azure Deployment Models
Azure Service Management Model (ASM) using Classic Portal. This was the first approach that was introduced by Microsoft. Here the resources are coupled and can be deployed using ASM PowerShell Module.

Azure Resource Management Model (ARM) using New Portal. The resources are decoupled and hence can be configured independently. JSON templates provide simple orchestration and rollback functions. They have their own ARM PowerShell Module as well.

For example, while deploying a VM - compute, Vnet and storage resources are coupled in ASM, and hence can not be configured independently. Whereas with ARM, these resources are can be configured independently.

ARM is the recommended model of deployment and in this course, we align to this model.

Lab 1 : Azure Essentials - Creating storage account and uploading files into storage account  
Solution url : https://docs.microsoft.com/en-us/azure/storage/files/storage-how-to-use-files-cli

if [ -f /opt/get-azure ]; then /opt/get-azure && source ~/.azureenv; else curl -O https://gist.githubusercontent.com/frescoplaylab/a06df129432f55ad14779cd75461e6c6/raw/82be68f978af82219bc67db65fbb3eeabbc799a2/get_azure_credentials; . get_azure_credentials && source ~/.azureenv; fi

az login -u $username -p $password

Click the following command to make the resource group default, so that you need not use the resource group in the commands.
az configure --defaults group=$resource

Create Storage Account
az storage account create -n mystorageaccount -g MyResourceGroup -l westus --sku Standard_LRS 
(Create a storage account 'mystorageaccount' in resource group 'MyResourceGroup' in the West US region with locally redundant storage.)
az storage account create -n myfrescodemostorage -g $resource -l westus --sku Standard_LRS

eg : 
export storageAccountName="mystorageacct$RANDOM"

az storage account create \
    --resource-group $resourceGroupName \
    --name $storageAccountName \
    --location $region \
    --kind StorageV2 \
    --sku Standard_LRS \
    --enable-large-file-share \
    --output none

Get Storage Account Key
az storage account keys list -g $resource -n myfrescodemostorage
key=$(az storage account keys list -g $resource -n myfrescodemostorage --query [0].value -o tsv) (assign first key to a variable)

eg: 
export storageAccountKey=$(az storage account keys list \
    --resource-group $resourceGroupName \
    --account-name $storageAccountName \
    --query "[0].value" | tr -d '"')

create a variable
export storageAccountName="myfrescodemostorage"

Creating Azure File Share
shareName="myshare"

az storage share create \
    --account-name $storageAccountName \
    --account-key $key \
    --name $shareName 


Creating Directory

az storage directory create \
   --account-name $storageAccountName \
   --account-key $key \
   --share-name $shareName \
   --name "myDirectory" \
   --output none

Uploading the file

git clone https://github.com/Azure-Samples/php-docs-hello-world

cd file_path

az storage file upload \
    --account-name $storageAccountName \
    --account-key $key \
    --share-name $shareName \
    --source "index.php" \
    --path "myDirectory/index.php"

Deleting the resources

Clean up resources
az group delete --name $resource

Managing Resources

Here are the tools at your disposal to manage resources,

Azure PowerShell
ARM and ASM Portals
Azure CLI
Azure Rest APIs
Azure SDKs

Azure PowerShell provides a set of cmdlets for managing your Azure resources and for Automating the scheduled task.
Azure PowerShell Module can be installed in several different ways,

From PowerShell Gallery
Using MSI installer from the GitHub repository
Using Microsoft Web Platform Installer

Check if PowerShellGet is installed on your system using:

>Get-Module PowerShellGet -list | Select-Object Name,Version,Path
(If PowerShellGet is not installed, download it by executing below command).
Install-Module -Name PowerShellGet -Force
Exit

Install ARM Module
You can install Azure Resource Manager (ARM) modules from the PowerShell Gallery using:
Install-Module AzureRM
PowerShell gallery is not configured as a Trusted repository. Hence you will be prompted to "Allow installing modules from PSGallery". Choose 'Yes' or 'Yes to All' to continue.

Once installed, load the module in the PowerShell session using:

Import-Module AzureRM
Validate the installation by Checking the version of Azure PowerShell using:
Get-Module AzureRM -list | Select-Object Name,Version,Path

Install ASM module
For Classic mode use following command to install Azure PowerShell,
Install-Module Azure
and

Import-Module Azure
Validate the installation by Checking the version of Azure PowerShell using:
Get-Module Azure -list | Select-Object Name,Version,Path

ARM and ASM Portals
Azure Service Management (ASM) is the traditional way of provisioning Azure Resources. ASM portal, also called Classic Portal uses ASM API calls to provision and manage Azure resources.

Azure Resource Manager (ARM) is the service that is now more widely used to provision resources on Azure. The ARM Portal also called the New portal uses ARM API calls to provision resources. Also, when you use tools like Azure PowerShell, you are invoking ARM API calls.

Advantages of ARM
Resource Group - ARM groups resources, making it much easier to manage them.
Smarter Provisioning - ARM refers ARM templates to figure out resource requirement, dependencies and provisions resources optimally.
Role-based Access control(RBAC) - gives greater control by configuring role-based access control at resource and resource group levels.
Tags - can be applied to resources to logically organize all of the resources in the same subscription.
Billing - In an organization, costs can be viewed for the entire group or for a group of resources sharing the same tag.

ARM Templates
ARM templates are commonly used to automate deployment. Resource groups and resource properties like the size of DB, type of storage account are defined in these JSON documents.

ARM inspects requirements in ARM templates, figures out resource dependencies and provisions resources in an order or even simultaneously when there is no direct dependency between certain resources.

GitHub Resource Manager contains a number of Azure Quickstart Templates which can be used to build and deploy.

Another option is to create custom templates, using JSON Editor. Visual Studio or Visual Studio Code a lightweight, open-source editor can be used to create these templates. 

Azure CLI 2.0 is an open-source, cross-platform, shell-based command line interface for managing Azure resources.

You can use it in your browser with Azure Cloud Shell, or you can install it on macOS, Linux, and Windows and run it from the command line.

Commands are structured as:

>azure <topic> <verb> <options>
or
>az <topic> <verb> <options>
Example to list the virtual machines within an account
>azure vm list 
Example to create a resource group named "MyRG" in the centerus region of Azure
>az group create -n MyRG -l centerus 

Azure REST APIs
One of the most powerful ways to manage Azure is via the Azure REST APIs. Representational State Transfer (REST) APIs are service endpoints that support sets of HTTP operations (methods) to manage your resources.

It forms the connecting glue between your applications and Azure.

Azure SDKs
Azure SDKs provide a framework which you can use to build, deploy and manage various solutions and services you may need on Azure.


